<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>IndexedDb Testing</title>
    <base href="/" />
    <!-- Bulma -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" type='text/css'>
</head>

<body>    
    <div class="container">
        <h1 class="title">IndexedDb Tests</h1>
    </div>

    <script src="jsDB.js"></script>
    <script src="MyDbJS.js"></script>
    <script>

var model = {
    name: 'MyDB', version: 1,
    tables: [{
        name: 'Usuarios', options: { keyPath: 'ssn', autoIncrement: true },
        columns: [{ name: 'Id', keyPath: true, autoIncrement: false, unique: true },
        { name: 'Email', keyPath: true, autoIncrement: false, unique: true },
        { name: 'Name', autoIncrement: false, unique: false }]
    },
    {
        name: 'Ministros', options: { keyPath: 'ssn', autoIncrement: true },
        columns: [{ name: 'Id', keyPath: true, autoIncrement: false, unique: true },
        { name: 'Email', keyPath: true, autoIncrement: false, unique: true },
        { name: 'Name', autoIncrement: false, unique: false }]
    }
    ]
};

window.MyDb.Init(model);


console.log('pagina',MyDb.Connected());

// db.Insert('Usuarios', data = [
//     {Name: 'Dinoa', Email: 'dinoa@example.com', Id: 0},
//     {Name: 'Rapaza', Email: 'rapaza@example.com', Id: 1},
//     {Name: 'Rapaza10', Email: 'dinoa1@example.com', Id: 2},
// ], function (result) {
//     console.log('pagina',result);   
// });

// setTimeout(() => {
    
//     db.Update('Usuarios', data = [
//         {Name: 'Rapaza10', ssn: 1, Id: 3},
//         {ssn: 2, basura: 'algo', Id: 4},
//         {Name: 'Rapaza11', ssn: 58, Id: 5},
//         {Name: 'Dinoa1', Email: 'dinoa1@example.com', ssn: 3, Id: 6}
//     ], function (result) {
//         console.log('pagina',result);   
//     });
// }, 2000);


setTimeout(() => {
    
    MyDb.Select('Usuarios', function (result){
            console.log('table',result);  
        });
    MyDb.SelectId('Usuarios', 2, function (result){
        console.log('by id 2',result);  
    });    
    MyDb.SelectId('Usuarios', 1, function (result){
        console.log('by id 10',result);  
    });  
    MyDb.SelectWhere('Usuarios', 'Email', 'rapaza@example.com', function (result){
        console.log('by Email rapaza@example.com',result);  
    }); 

 
}, 1000);
    </script>

</body>

</html>
